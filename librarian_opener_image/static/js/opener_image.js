// Generated by CoffeeScript 1.10.0
(function(window, $) {
  'use strict';
  var backButton, container, imgEl, loadImage, nextButton, nextImage, prevButton, prevImage, showAlbum, urls;
  container = $('.opener-image');
  urls = JSON.parse($('#image-urls').html()).urls;
  imgEl = $('.image-container img');
  prevButton = $('.previous');
  nextButton = $('.next');
  backButton = $('.show-album .back');
  showAlbum = function(e) {
    var res, url;
    e.preventDefault();
    url = $(this).attr('href');
    res = $.get(url);
    return res.done(function(data) {
      return container.replaceWith(data);
    });
  };
  loadImage = function(imgIndex) {
    if (imgIndex < 0 || imgIndex >= urls.length) {
      return;
    }
    imgEl.data('index', imgIndex);
    imgEl.fadeOut(function() {
      imgEl.attr('src', urls[imgIndex]);
      return imgEl.fadeIn();
    });
    if (imgIndex === 0) {
      prevButton.css('visibility', 'hidden');
    } else {
      prevButton.css('visibility', 'visible');
    }
    if (imgIndex === urls.length - 1) {
      return nextButton.css('visibility', 'hidden');
    } else {
      return nextButton.css('visibility', 'visible');
    }
  };
  prevImage = function(e) {
    loadImage(parseInt(imgEl.data('index'), 10) - 1);
    return e.preventDefault();
  };
  nextImage = function(e) {
    loadImage(parseInt(imgEl.data('index'), 10) + 1);
    return e.preventDefault();
  };
  prevButton.click(prevImage);
  nextButton.click(nextImage);
  return backButton.click(showAlbum);
})(this, this.jQuery);
